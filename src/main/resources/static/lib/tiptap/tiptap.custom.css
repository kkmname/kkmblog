/* tiptap.custom.css - 통합/리팩토링 완료 버전 */

/* ===== CSS 변수 정의 ===== */
.tiptap-editor,
.tiptap-toolbar {
  --tt-bg: #ffffff;
  --tt-fg: #151515;
  --tt-muted: #727578;
  --tt-border: #7c7d7e;
  --tt-surface: #f8fafc;
  --tt-primary: #444444;
  --tt-ring: 0 0 0 4px rgba(0, 0, 0, 0.08);
  --tt-chip: #f2f4f7;
  --tt-code-bg: #e8eff2;
  --tt-blockquote-bg: #fafafa;
  --tt-highlight: #fde68a;
  --tt-table-header: #f3f4f6;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Roboto",
               "Noto Sans KR", "Apple SD Gothic Neo", "맑은 고딕", sans-serif;
  color: var(--tt-fg);
}

/* ===== 툴바 ===== */
.tiptap-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  padding: 10px;
  border: 1px solid var(--tt-border);
  background: linear-gradient(180deg, var(--tt-surface), transparent);
  border-radius: 14px;
}

.tiptap-group {
  display: inline-flex;
  gap: 6px;
  padding-right: 10px;
  margin-right: 10px;
  border-right: 1px dashed var(--tt-border);
}

.tiptap-group:last-child {
  border-right: 0;
  margin-right: 0;
  padding-right: 0;
}

.tiptap-btn {
  appearance: none;
  border: 1px solid var(--tt-border);
  background: var(--tt-bg);
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 13px;
  line-height: 1;
  color: var(--tt-muted);
  cursor: pointer;
  transition: all 0.15s ease;
  user-select: none;
}

.tiptap-btn:hover {
  color: var(--tt-fg);
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.tiptap-btn:active { transform: translateY(0); }

.tiptap-btn.is-active {
  color: var(--tt-fg);
  border-color: var(--tt-primary);
  box-shadow: var(--tt-ring) inset;
}

.tiptap-btn:disabled { opacity: 0.5; cursor: not-allowed; }

.tiptap-select {
  appearance: none;
  border: 1px solid var(--tt-border);
  background: var(--tt-bg);
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--tt-fg);
  cursor: pointer;
  min-width: 150px;
}

/* ===== ProseMirror 본문 ===== */
.tiptap-editor .ProseMirror {
  box-sizing: border-box;
  min-height: 400px;
  padding: 20px;
  border: 1px solid var(--tt-border);
  border-radius: 14px;
  background: var(--tt-bg);
  color: var(--tt-fg);
  outline: none;
  font-family: inherit;
  white-space: pre-wrap;
  word-wrap: break-word;
  margin-top: 10px;
  line-height: 1.6;
}

.tiptap-editor .ProseMirror:focus {
  border-color: var(--tt-primary);
  box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.06);
}

/* ::before/::after 초기화 */
.tiptap-editor .ProseMirror::before,
.tiptap-editor .ProseMirror::after { content: ''; display: block; height: 0; visibility: hidden; }

/* 선택 영역 */
.tiptap-editor .ProseMirror ::selection {
  background: var(--tt-primary);
  color: white;
}

/* Placeholder */
.tiptap-editor .ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  height: 0;
  color: var(--tt-muted);
  pointer-events: none;
}

/* 텍스트 스타일 */
.tiptap-editor .ProseMirror h1 {
  all: unset; /* 상속 초기화 */
  display: block;
  font-weight: 700;
  font-size: 2em;
  line-height: 1.25;
}

.tiptap-editor .ProseMirror h2 {
  all: unset;
  display: block;
  font-weight: 700;
  font-size: 1.5em;
  line-height: 1.3;
}

.tiptap-editor .ProseMirror h3 {
  all: unset;
  display: block;
  font-weight: 600;
  font-size: 1.25em;
  line-height: 1.35;
}
.tiptap-editor .ProseMirror p { margin:0.6em 0; }
.tiptap-editor .ProseMirror strong { font-weight:700; }
.tiptap-editor .ProseMirror em { font-style: italic; }
.tiptap-editor .ProseMirror u { text-decoration: underline; text-underline-offset: 2px; }
.tiptap-editor .ProseMirror s { text-decoration: line-through; }

/* ===== 일반 리스트 ===== */
.tiptap-editor .ProseMirror ul { list-style: disc outside; padding-left: 0em; margin: 0.5em 0; }
.tiptap-editor .ProseMirror ul > li::marker { color: var(--tt-fg); font-size: inherit; vertical-align: middle; }

.tiptap-editor .ProseMirror ol { list-style: none; counter-reset: list-item; padding-left: 0em; margin: 0.5em 0; }
.tiptap-editor .ProseMirror ol li { position: relative; margin: 0.25em 0; }
.tiptap-editor .ProseMirror ol li::before {
  content: counter(list-item) ".";
  counter-increment: list-item;
  position: absolute;
  left: 0;
  text-align: right;
  margin-right: 0.5em;
  color: var(--tt-fg);
  font-weight: normal;
}

/* ===== 체크리스트 (taskList 전용) ===== */
.tiptap-editor .ProseMirror ul[data-type="taskList"] {
  list-style: none;
  padding-left: 0;
  margin: 0.5em 0;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] > li {
  display: flex;
  align-items: center;
  gap: 0.5em;
  padding-left: 0em;
  margin: 0.25em 0;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] > li > label {
  display: inline-flex;
  align-items: center;
  width: auto;
  margin: 0;
  padding: 0;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] > li > div {
  display: flex;
  flex: 1 1 auto;
  margin: 0;
  min-width: 0;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] > li > div p {
  margin: 0;
  display: inline;
  flex: 1;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] > li::before,
.tiptap-editor .ProseMirror ul[data-type="taskList"] > li::after,
.tiptap-editor .ProseMirror ul[data-type="taskList"] > li::marker {
  content: none !important;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] li input[type="checkbox"] {
  width: 16px;
  height: 16px;
  margin: 0;
  accent-color: var(--tt-primary);
}

/* ===== 코드 블록 ===== */
.tiptap-editor .ProseMirror code { background:var(--tt-code-bg); padding:0.2em 0.4em; border-radius:4px; font-family:ui-monospace, monospace; font-size:0.9em; }
.tiptap-editor .ProseMirror pre { background:#f7f7f8; color:var(--tt-fg); border:1px solid var(--tt-border); border-radius:8px; padding:16px; overflow-x:auto; font-family:ui-monospace, monospace; font-size:0.9em; line-height:1.5; margin:1em 0; }
.tiptap-editor .ProseMirror pre code { background:none; padding:0; border-radius:0; font-size:inherit; }

/* ===== 인용구, 구분선, 링크, 하이라이트, 이미지, 테이블 ===== */
.tiptap-editor .ProseMirror blockquote { border-left:3px solid var(--tt-primary); margin:1em 0; padding:0.5em 1em; color:var(--tt-muted); background:var(--tt-blockquote-bg); border-radius:0 8px 8px 0; }
.tiptap-editor .ProseMirror hr { border:0; border-top:1px solid var(--tt-border); margin:0; }
.tiptap-editor .ProseMirror a { color:var(--tt-primary); text-decoration:underline; text-underline-offset:2px; cursor:pointer; }
.tiptap-editor .ProseMirror a:hover { opacity:0.8; }
.tiptap-editor .ProseMirror mark { background:var(--tt-highlight); padding:0 0.25em; border-radius:4px; }
.tiptap-editor .ProseMirror img { max-width:100%; height:auto; border-radius:8px; display:block; margin:1em 0; }
.tiptap-editor .ProseMirror table { border-collapse:separate; width:100%; border-spacing:0; overflow:hidden; border:1px solid var(--tt-border); border-radius:8px; margin:1em 0; }
.tiptap-editor .ProseMirror th, .tiptap-editor .ProseMirror td { border-right:1px solid var(--tt-border); border-bottom:1px solid var(--tt-border); padding:12px; text-align:left; position:relative; }
.tiptap-editor .ProseMirror th { background:var(--tt-table-header); font-weight:600; }
.tiptap-editor .ProseMirror tr:last-child td { border-bottom:0; }
.tiptap-editor .ProseMirror td:last-child, .tiptap-editor .ProseMirror th:last-child { border-right:0; }

/* ===== 하단 상태바 ===== */
.tiptap-footer { display:flex; justify-content:space-between; align-items:center; font-size:12px; color:var(--tt-muted); margin-top:8px; padding:0 4px; }
.tiptap-chip { background:var(--tt-chip); border:1px solid var(--tt-border); padding:4px 10px; border-radius:999px; font-size:12px; color:var(--tt-muted); }

/* ===== 반응형 ===== */
@media (max-width:768px) {
  .tiptap-toolbar { padding:8px; }
  .tiptap-btn { padding:6px 10px; font-size:12px; }
  .tiptap-editor .ProseMirror { padding:16px; min-height:300px; }
}
